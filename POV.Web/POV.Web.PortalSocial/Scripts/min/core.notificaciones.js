function getTotalNotificaciones(){oNotificacionesApi.GetTotalNotificaciones({success:function(a){printTotalNotificaciones(a)},error:function(a){return}})}function printTotalNotificaciones(a){if(a.d!=null&&a.d.total!=null&&a.d.total>0){var b=a.d.total!=null&&a.d.total>0?"("+a.d.total+")":"(0)";$("#social_summary").text(b)}else{$("#social_summary").text("(0)")}if(a.d!=null&&a.d.reportesabuso!=null&&a.d.reportesabuso>0){var c="("+a.d.reportesabuso+")";$("#reporte_summary").text(c)}else{$("#reporte_summary").text("(0)")}}function loadNotificaciones(){var a={dto:{pagesize:page_size,currentpage:current_page}};var b=$.toJSON(a);oNotificacionesApi.GetNotificaciones({success:function(a){printNotificaciones(a)}},b)}function printNotificaciones(a){if(a.d.length<=0){if(current_page==1){var b="<span>No tienes notificaciones</span>";$("#more").empty();$("#more").html(b)}else{var b="<span>No existen más notificaciones</span>";$("#more").empty();$("#more").html(b)}}else{$("#notificacionTmpl").tmpl(a.d,{getCss:getCss}).appendTo("#notificaciones_stream");getTotalNotificaciones();if(a.d.length<page_size){var b="<span>No existen más notificaciones</span>";$("#more").empty();$("#more").html(b)}else{$("#more").html('<a class="link_blue" onclick="javascript:loadNotificaciones();" >Mostrar más notificaciones</a>')}ChangeBtnDeleteNotificacion()}if(current_page==1){$(document).trigger("coreNotificaciones/printNotificaciones")}current_page++}function deleteNotificacion(a){if(a!=null&&a!=""){var b=new MessageApi;var c="Se eliminarán los datos de la notificación <br />¿Desea Continuar?";b.CreateQuestionMessage(c,function(){$("#dialog-question").dialog("close");removeNotificacionFromServer(a)});b.ShowQuestion()}}function removeNotificacionFromServer(a){var b={dto:{notificacionid:a}};var c=$.toJSON(b);oNotificacionesApi.DeleteNotificacion({success:function(a){deleteNotificacionFromUI(a)}},c)}function ConfirmNotificacionFromServer(){oNotificacionesApi.ConfirmNotificacion({success:function(a){}},null)}function deleteNotificacionFromUI(a){if(a!=null&&a.d!=null&&a.d.notificacionid!=null){var b=document.getElementById(a.d.notificacionid);$(b).parent().remove()}}function getCss(a){if(a==1)return"new_notification";return""}function ChangeBtnDeleteNotificacion(){$('button[id|="btn-del"]').each(function(a){$(this).button({icons:{primary:"ui-icon-close"},text:false})})}var oNotificacionesApi=new NotificacionesApi;$(document).bind("coreNotificaciones/printNotificaciones",function(){ConfirmNotificacionFromServer()})