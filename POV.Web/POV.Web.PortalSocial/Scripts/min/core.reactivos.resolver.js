function initPage(){loadReactivo()}function loadReactivo(){if(reactivoid.val()!=""){$("#content").block({message:'<h1 style="font-size:20px;"><img src="../images/ajax-loader.gif" /> Cargando...</h1>'});var a={dto:{reactivoid:reactivoid.val()}};var b=$.toJSON(a);api.LoadReactivo({success:function(a){printReactivo(a)}},b)}}function printReactivo(a){var b=$.toJSON(a);$("#panel_preguntas").empty();$("#wrapReactivo").empty();$("#reactivoViewTmpl").tmpl(a.d).appendTo("#panel_reactivo");var c=$("#wrapReactivo");c.load("../Files/ResourceProxy.aspx?url="+a.d.plantilla,function(){$("#content").unblock()})}function loadResource(a,b){return""}function getTipoPlantilla(a){if(a==TIPO_ABIERTA.val()){return"#abiertaTmpl"}else if(a==TIPO_OPCIONMULTIPLE.val()){return"#opcionTmpl"}}function registrar(){var a=true;var b=[];var c=0;$('li[id|="'+reactivoid.val()+'"]').each(function(c){var d=$(this).attr("id");var e=document.getElementById("options_"+d);var f=document.getElementById("abierta_"+d);if(e!=undefined){var g=$("#options_"+d+" input:radio:checked");var h=$("#options_"+d+" input:radio:first").attr("id");if(g.val()!=null){$(this).css("border","1px solid #E5E5E5");var i={preguntaid:g.attr("name"),opcionseleccionadaid:g.val()};b[c]=i}else if(h!=null){$(this).css("border","1px solid red");a=false}}else if(f!=undefined){var j=$("#abierta_"+d+" textarea");if(j.val()!=""){$(this).css("border","1px solid #E5E5E5");var k={preguntaid:j.attr("id"),textoabierta:j.val()};b[c]=k}else{$(this).css("border","1px solid red");a=false}}c++});if(a){var d={dto:{preguntas:b,reactivoid:reactivoid.val()}};var e=$.toJSON(d);$("#content").block({message:'<h1 style="font-size:20px;"><img src="../images/ajax-loader.gif" /> Enviando Respuestas...</h1>'});api.SaveAnswers({success:function(a){$("#content").unblock();printResultRespuesta(a.d)}},e)}else{$("#txtRedirect").val("");$(hdnmessageinputid).val("Debe completar el reactivo");$(hdnmessagetypeinputid).val("1");mostrarError()}}function printResultRespuesta(a){if(a.success==true){$("#panel_reactivo").empty();$("#panel_resultado").empty();$("#resultadoTmpl").tmpl(a).appendTo("#panel_resultado")}else{alert(a.error)}}function publicar(){var a=$("#txtPublicacion").val();a=$.trim(a);if(a!=""){var b={publicaciondto:{contenido:a,usuariosocialid:usrse.val(),tipo:1,socialhubid:hub.val()}};var c=$.toJSON(b);api.Share({success:function(a){window.location="../Reactivos/Sugerencias.aspx"}},c)}}var api=new ReactivoApi;$(document).ready(initPage)